2025-08-02 12:16:10,164 - src.database.factory - INFO - create_engine:128 - Created postgresql engine: postgresql://autotrainx:1234@localhost:5432/autotrainx
2025-08-02 12:16:10,169 - src.database.manager_v2 - INFO - __init__:62 - Database manager initialized with postgresql
2025-08-02 12:16:11,372 - src.database.factory - INFO - create_engine:128 - Created postgresql engine: postgresql://autotrainx:1234@localhost:5432/autotrainx
2025-08-02 12:16:11,376 - src.database.manager_v2 - INFO - __init__:62 - Database manager initialized with postgresql
2025-08-02 12:21:53,785 - src.training.enhanced_trainer - INFO - _execute_with_progress:234 - Training completed for dataset: m14w00dh4ll
2025-08-02 12:21:53,790 - src.pipeline.hooks.hook_manager - INFO - execute_hooks:74 - Executing hook: ImagePreviewHook
2025-08-02 12:21:53,790 - src.pipeline.hooks.preview_hook - INFO - execute:127 - Executing image preview hook for m14w00dh4ll
2025-08-02 12:21:53,791 - src.pipeline.hooks.preview_hook - INFO - _find_latest_model:297 - Selected latest model: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/model/m14w00dh4ll_FL1_f4c08ea2.safetensors
2025-08-02 12:21:53,792 - src.image_preview.preview_pipeline - INFO - generate_previews:70 - Generating 2 previews for m14w00dh4ll using FL1
2025-08-02 12:21:54,870 - src.image_preview.utils - INFO - ensure_comfyui_running:154 - ComfyUI Environment Diagnosis:
2025-08-02 12:21:54,870 - src.image_preview.utils - INFO - ensure_comfyui_running:155 -   ComfyUI path exists: True
2025-08-02 12:21:54,870 - src.image_preview.utils - INFO - ensure_comfyui_running:156 -   main.py exists: True
2025-08-02 12:21:54,871 - src.image_preview.utils - INFO - ensure_comfyui_running:157 -   Python: Python 3.12.3
2025-08-02 12:21:54,871 - src.image_preview.utils - INFO - ensure_comfyui_running:158 -   GPU available: True
2025-08-02 12:21:54,871 - src.image_preview.utils - INFO - ensure_comfyui_running:159 -   Port 8188 available: True
2025-08-02 12:21:54,871 - src.image_preview.utils - INFO - ensure_comfyui_running:177 - Starting ComfyUI from: /home/eqx/ComfyUI
2025-08-02 12:21:54,871 - src.image_preview.utils - INFO - ensure_comfyui_running:206 - Using ComfyUI virtual environment: /home/eqx/ComfyUI/venv
2025-08-02 12:21:54,871 - src.image_preview.utils - INFO - ensure_comfyui_running:218 - ComfyUI output will be logged to: /home/eqx/AutoTrainX/logs/ComfyUI_log/comfyui_20250802_122154.log
2025-08-02 12:21:54,871 - src.image_preview.utils - INFO - ensure_comfyui_running:221 - Executing command: /home/eqx/ComfyUI/venv/bin/python main.py --listen 127.0.0.1 --port 8188
2025-08-02 12:22:02,981 - src.image_preview.utils - INFO - ensure_comfyui_running:238 - ComfyUI started successfully on http://127.0.0.1:8188
2025-08-02 12:22:02,988 - src.image_preview.model_manager - INFO - _get_effective_preset:102 - Custom preset 'FL1' detected, using base preset 'FluxLORA' for model type detection
2025-08-02 12:22:02,988 - src.image_preview.model_manager - INFO - copy_model_to_comfyui:144 - Copying model to ComfyUI: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/model/m14w00dh4ll_FL1_f4c08ea2.safetensors -> /home/eqx/ComfyUI/models/loras/m14w00dh4ll_FL1_f4c08ea2.safetensors
2025-08-02 12:22:04,133 - src.image_preview.workflow_handler - INFO - _get_base_preset:70 - Custom preset 'FL1' detected, using base preset 'FluxLORA' for workflow
2025-08-02 12:22:04,133 - src.image_preview.workflow_handler - INFO - load_workflow:120 - Loaded and validated workflow: Flux_LORA.json for FL1
2025-08-02 12:22:04,134 - src.image_preview.preview_pipeline - INFO - generate_previews:118 - Generating preview 1/2
2025-08-02 12:22:04,134 - src.image_preview.workflow_customizer - INFO - customize_workflow:79 - Customizing workflow for FL1 - Preview 1
2025-08-02 12:22:04,138 - src.image_preview.workflow_customizer - INFO - _get_effective_preset:53 - Custom preset 'FL1' detected, using base preset 'FluxLORA' for customization
2025-08-02 12:22:04,138 - src.image_preview.workflow_customizer - INFO - _customize_flux_lora_workflow:115 - UNETLoader found - keeping current value (TODO: update in future)
2025-08-02 12:22:04,138 - src.image_preview.workflow_customizer - INFO - _customize_flux_lora_workflow:135 - Randomized noise seed: 1688236114
2025-08-02 12:22:04,138 - src.image_preview.workflow_customizer - INFO - _get_sample_image_path:325 - Using sample image 1/5: sample_image_01.jpg
2025-08-02 12:22:04,138 - src.image_preview.workflow_customizer - INFO - _customize_flux_lora_workflow:128 - Updated LoadImageFromPath: /home/eqx/AutoTrainX/ComfyUI_workflow_utils/sample_Image/sample_image_01.jpg
2025-08-02 12:22:04,138 - src.image_preview.workflow_customizer - INFO - _customize_flux_lora_workflow:121 - Updated LoraLoader with model: m14w00dh4ll_FL1_f4c08ea2.safetensors
2025-08-02 12:22:04,139 - src.image_preview.workflow_customizer - INFO - _customize_flux_lora_workflow:176 - Updated output path: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/Preview
2025-08-02 12:22:04,139 - src.image_preview.workflow_customizer - INFO - _update_save_image_nodes:352 - Updated SaveImage_EQX filename: m14w00dh4ll_FL1_01
2025-08-02 12:22:04,149 - src.image_preview.comfyui_client - INFO - execute_workflow:80 - Submitted workflow with job ID: 0102f2f1-19a5-47e7-b972-d0e8e0dd9546
2025-08-02 12:25:54,618 - src.image_preview.preview_pipeline - INFO - generate_previews:204 - Found generated image: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/Preview/m14w00dh4ll_FL1_01_0001.png
2025-08-02 12:25:54,622 - src.image_preview.preview_pipeline - INFO - generate_previews:118 - Generating preview 2/2
2025-08-02 12:25:54,623 - src.image_preview.workflow_customizer - INFO - customize_workflow:79 - Customizing workflow for FL1 - Preview 2
2025-08-02 12:25:54,631 - src.image_preview.workflow_customizer - INFO - _get_effective_preset:53 - Custom preset 'FL1' detected, using base preset 'FluxLORA' for customization
2025-08-02 12:25:54,632 - src.image_preview.workflow_customizer - INFO - _customize_flux_lora_workflow:115 - UNETLoader found - keeping current value (TODO: update in future)
2025-08-02 12:25:54,632 - src.image_preview.workflow_customizer - INFO - _customize_flux_lora_workflow:135 - Randomized noise seed: 957683708
2025-08-02 12:25:54,633 - src.image_preview.workflow_customizer - INFO - _get_sample_image_path:325 - Using sample image 2/5: sample_image_02.jpg
2025-08-02 12:25:54,633 - src.image_preview.workflow_customizer - INFO - _customize_flux_lora_workflow:128 - Updated LoadImageFromPath: /home/eqx/AutoTrainX/ComfyUI_workflow_utils/sample_Image/sample_image_02.jpg
2025-08-02 12:25:54,633 - src.image_preview.workflow_customizer - INFO - _customize_flux_lora_workflow:121 - Updated LoraLoader with model: m14w00dh4ll_FL1_f4c08ea2.safetensors
2025-08-02 12:25:54,633 - src.image_preview.workflow_customizer - INFO - _customize_flux_lora_workflow:176 - Updated output path: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/Preview
2025-08-02 12:25:54,633 - src.image_preview.workflow_customizer - INFO - _update_save_image_nodes:352 - Updated SaveImage_EQX filename: m14w00dh4ll_FL1_02
2025-08-02 12:25:54,638 - src.image_preview.comfyui_client - INFO - execute_workflow:80 - Submitted workflow with job ID: 86e46755-c93d-416c-94af-4668b7cc80a0
2025-08-02 12:27:30,806 - src.image_preview.preview_pipeline - INFO - generate_previews:204 - Found generated image: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/Preview/m14w00dh4ll_FL1_02_0001.png
2025-08-02 12:27:30,807 - src.image_preview.model_manager - INFO - remove_model_from_comfyui:157 - Removing temporary model: /home/eqx/ComfyUI/models/loras/m14w00dh4ll_FL1_f4c08ea2.safetensors
2025-08-02 12:27:30,807 - src.image_preview.preview_pipeline - INFO - generate_previews:250 - Shutting down ComfyUI after preview generation
2025-08-02 12:27:30,824 - src.image_preview.utils - INFO - shutdown_comfyui:420 - ComfyUI process killed successfully
2025-08-02 12:27:30,827 - src.pipeline.hooks.hook_manager - INFO - execute_hooks:83 - Hook ImagePreviewHook completed successfully
2025-08-02 12:27:30,827 - src.pipeline.hooks.file_move_hook - INFO - should_execute:76 - File move hook will execute for mode: single, dataset: m14w00dh4ll
2025-08-02 12:27:30,828 - src.pipeline.hooks.hook_manager - INFO - execute_hooks:74 - Executing hook: FileMoveHook
2025-08-02 12:27:30,828 - src.pipeline.hooks.file_move_hook - INFO - execute:95 - FileMoveHook execute - mode: single
2025-08-02 12:27:30,828 - src.pipeline.hooks.file_move_hook - INFO - execute:96 - FileMoveHook execute - context keys: ['success', 'training_success', 'dataset_name', 'preset', 'model_type', 'preview_count', 'job_id', 'mode', 'config_path', 'preview_enabled']
2025-08-02 12:27:30,830 - src.pipeline.hooks.file_move_hook - INFO - move_training_files:448 - Moving model: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/model/m14w00dh4ll_FL1_f4c08ea2.safetensors -> /home/eqx/custom/m14w00dh4ll_FL1_f4c08ea2/m14w00dh4ll_FL1_f4c08ea2.safetensors
2025-08-02 12:27:30,831 - src.pipeline.hooks.file_move_hook - INFO - move_training_files:474 - Moving preview dir: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/Preview -> /home/eqx/custom/m14w00dh4ll_FL1_f4c08ea2/Preview
2025-08-02 12:27:30,832 - src.pipeline.hooks.hook_manager - INFO - execute_hooks:83 - Hook FileMoveHook completed successfully
