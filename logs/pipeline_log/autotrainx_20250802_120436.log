2025-08-02 12:04:36,366 - src.database.factory - INFO - create_engine:128 - Created postgresql engine: postgresql://autotrainx:1234@localhost:5432/autotrainx
2025-08-02 12:04:36,371 - src.database.manager_v2 - INFO - __init__:62 - Database manager initialized with postgresql
2025-08-02 12:07:54,030 - src.training.enhanced_trainer - INFO - _execute_with_progress:234 - Training completed for dataset: m14w00dh4ll
2025-08-02 12:07:54,038 - src.pipeline.hooks.hook_manager - INFO - execute_hooks:74 - Executing hook: ImagePreviewHook
2025-08-02 12:07:54,038 - src.pipeline.hooks.preview_hook - INFO - execute:127 - Executing image preview hook for m14w00dh4ll
2025-08-02 12:07:54,040 - src.pipeline.hooks.preview_hook - INFO - _find_latest_model:297 - Selected latest model: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/model/m14w00dh4ll_SX1_ee888a70.safetensors
2025-08-02 12:07:54,040 - src.image_preview.preview_pipeline - INFO - generate_previews:70 - Generating 2 previews for m14w00dh4ll using SX1
2025-08-02 12:07:55,515 - src.image_preview.utils - INFO - ensure_comfyui_running:154 - ComfyUI Environment Diagnosis:
2025-08-02 12:07:55,515 - src.image_preview.utils - INFO - ensure_comfyui_running:155 -   ComfyUI path exists: True
2025-08-02 12:07:55,515 - src.image_preview.utils - INFO - ensure_comfyui_running:156 -   main.py exists: True
2025-08-02 12:07:55,515 - src.image_preview.utils - INFO - ensure_comfyui_running:157 -   Python: Python 3.12.3
2025-08-02 12:07:55,515 - src.image_preview.utils - INFO - ensure_comfyui_running:158 -   GPU available: True
2025-08-02 12:07:55,515 - src.image_preview.utils - INFO - ensure_comfyui_running:159 -   Port 8188 available: True
2025-08-02 12:07:55,515 - src.image_preview.utils - INFO - ensure_comfyui_running:177 - Starting ComfyUI from: /home/eqx/ComfyUI
2025-08-02 12:07:55,516 - src.image_preview.utils - INFO - ensure_comfyui_running:206 - Using ComfyUI virtual environment: /home/eqx/ComfyUI/venv
2025-08-02 12:07:55,516 - src.image_preview.utils - INFO - ensure_comfyui_running:218 - ComfyUI output will be logged to: /home/eqx/AutoTrainX/logs/ComfyUI_log/comfyui_20250802_120755.log
2025-08-02 12:07:55,516 - src.image_preview.utils - INFO - ensure_comfyui_running:221 - Executing command: /home/eqx/ComfyUI/venv/bin/python main.py --listen 127.0.0.1 --port 8188
2025-08-02 12:08:05,630 - src.image_preview.utils - INFO - ensure_comfyui_running:238 - ComfyUI started successfully on http://127.0.0.1:8188
2025-08-02 12:08:05,638 - src.image_preview.model_manager - INFO - _get_effective_preset:102 - Custom preset 'SX1' detected, using base preset 'SDXLCheckpoint' for model type detection
2025-08-02 12:08:05,638 - src.image_preview.model_manager - INFO - copy_model_to_comfyui:144 - Copying model to ComfyUI: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/model/m14w00dh4ll_SX1_ee888a70.safetensors -> /home/eqx/ComfyUI/models/checkpoints/m14w00dh4ll_SX1_ee888a70.safetensors
2025-08-02 12:08:13,084 - src.image_preview.workflow_handler - INFO - _get_base_preset:70 - Custom preset 'SX1' detected, using base preset 'SDXLCheckpoint' for workflow
2025-08-02 12:08:13,084 - src.image_preview.workflow_handler - INFO - load_workflow:120 - Loaded and validated workflow: SDXLCheckpoint.json for SX1
2025-08-02 12:08:13,084 - src.image_preview.preview_pipeline - INFO - generate_previews:118 - Generating preview 1/2
2025-08-02 12:08:13,085 - src.image_preview.workflow_customizer - INFO - customize_workflow:79 - Customizing workflow for SX1 - Preview 1
2025-08-02 12:08:13,088 - src.image_preview.workflow_customizer - INFO - _get_effective_preset:53 - Custom preset 'SX1' detected, using base preset 'SDXLCheckpoint' for customization
2025-08-02 12:08:13,088 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:201 - Updated CheckpointLoaderSimple: m14w00dh4ll_SX1_ee888a70.safetensors
2025-08-02 12:08:13,089 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:208 - Randomized seed in Seed Everywhere: 3361270376
2025-08-02 12:08:13,089 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:217 - Randomized seed in Load Prompt From File - EQX: 38514420
2025-08-02 12:08:13,089 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:239 - Updated prompt file path: /home/eqx/AutoTrainX/ComfyUI_workflow_utils/txt/stand1.txt
2025-08-02 12:08:13,089 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:293 - Updated SaveImage_EQX filename: m14w00dh4ll_SX1_01
2025-08-02 12:08:13,089 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:208 - Randomized seed in Seed Everywhere: 2953054733
2025-08-02 12:08:13,089 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:280 - Updated output path: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/Preview
2025-08-02 12:08:13,093 - src.image_preview.comfyui_client - INFO - execute_workflow:80 - Submitted workflow with job ID: 57d006bc-f34e-4170-b309-5ea39ea7877c
2025-08-02 12:08:53,721 - src.image_preview.preview_pipeline - INFO - generate_previews:204 - Found generated image: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/Preview/m14w00dh4ll_SX1_01_0001.png
2025-08-02 12:08:53,721 - src.image_preview.preview_pipeline - INFO - generate_previews:118 - Generating preview 2/2
2025-08-02 12:08:53,722 - src.image_preview.workflow_customizer - INFO - customize_workflow:79 - Customizing workflow for SX1 - Preview 2
2025-08-02 12:08:53,726 - src.image_preview.workflow_customizer - INFO - _get_effective_preset:53 - Custom preset 'SX1' detected, using base preset 'SDXLCheckpoint' for customization
2025-08-02 12:08:53,726 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:201 - Updated CheckpointLoaderSimple: m14w00dh4ll_SX1_ee888a70.safetensors
2025-08-02 12:08:53,726 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:208 - Randomized seed in Seed Everywhere: 4223831541
2025-08-02 12:08:53,726 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:217 - Randomized seed in Load Prompt From File - EQX: 3667278479
2025-08-02 12:08:53,726 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:239 - Updated prompt file path: /home/eqx/AutoTrainX/ComfyUI_workflow_utils/txt/stand1.txt
2025-08-02 12:08:53,726 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:293 - Updated SaveImage_EQX filename: m14w00dh4ll_SX1_02
2025-08-02 12:08:53,726 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:208 - Randomized seed in Seed Everywhere: 1606792454
2025-08-02 12:08:53,726 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:280 - Updated output path: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/Preview
2025-08-02 12:08:53,729 - src.image_preview.comfyui_client - INFO - execute_workflow:80 - Submitted workflow with job ID: 0c18144d-66e8-4879-a59b-c37efb60e930
2025-08-02 12:09:28,210 - src.image_preview.preview_pipeline - INFO - generate_previews:204 - Found generated image: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/Preview/m14w00dh4ll_SX1_02_0001.png
2025-08-02 12:09:28,210 - src.image_preview.model_manager - INFO - remove_model_from_comfyui:157 - Removing temporary model: /home/eqx/ComfyUI/models/checkpoints/m14w00dh4ll_SX1_ee888a70.safetensors
2025-08-02 12:09:28,807 - src.image_preview.preview_pipeline - INFO - generate_previews:250 - Shutting down ComfyUI after preview generation
2025-08-02 12:09:28,821 - src.image_preview.utils - INFO - shutdown_comfyui:420 - ComfyUI process killed successfully
2025-08-02 12:09:28,821 - src.pipeline.hooks.hook_manager - INFO - execute_hooks:83 - Hook ImagePreviewHook completed successfully
2025-08-02 12:09:28,821 - src.pipeline.hooks.file_move_hook - INFO - should_execute:76 - File move hook will execute for mode: single, dataset: m14w00dh4ll
2025-08-02 12:09:28,822 - src.pipeline.hooks.hook_manager - INFO - execute_hooks:74 - Executing hook: FileMoveHook
2025-08-02 12:09:28,822 - src.pipeline.hooks.file_move_hook - INFO - execute:95 - FileMoveHook execute - mode: single
2025-08-02 12:09:28,822 - src.pipeline.hooks.file_move_hook - INFO - execute:96 - FileMoveHook execute - context keys: ['success', 'training_success', 'dataset_name', 'preset', 'model_type', 'preview_count', 'job_id', 'mode', 'config_path', 'preview_enabled']
2025-08-02 12:09:28,822 - src.pipeline.hooks.file_move_hook - INFO - move_training_files:448 - Moving model: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/model/m14w00dh4ll_SX1_ee888a70.safetensors -> /home/eqx/custom/m14w00dh4ll_SX1_ee888a70/m14w00dh4ll_SX1_ee888a70.safetensors
2025-08-02 12:09:28,822 - src.pipeline.hooks.file_move_hook - INFO - move_training_files:474 - Moving preview dir: /home/eqx/AutoTrainX/workspace/output/m14w00dh4ll/Preview -> /home/eqx/custom/m14w00dh4ll_SX1_ee888a70/Preview
2025-08-02 12:09:28,823 - src.pipeline.hooks.hook_manager - INFO - execute_hooks:83 - Hook FileMoveHook completed successfully
