2025-08-02 18:09:50,461 - src.database.factory - INFO - create_engine:128 - Created postgresql engine: postgresql://autotrainx:1234@localhost:5432/autotrainx
2025-08-02 18:09:50,466 - src.database.manager_v2 - INFO - __init__:62 - Database manager initialized with postgresql
2025-08-02 18:11:14,509 - src.training.enhanced_trainer - INFO - _execute_with_progress:234 - Training completed for dataset: b09g13
2025-08-02 18:11:14,513 - src.pipeline.hooks.hook_manager - INFO - execute_hooks:74 - Executing hook: ImagePreviewHook
2025-08-02 18:11:14,514 - src.pipeline.hooks.preview_hook - INFO - execute:127 - Executing image preview hook for b09g13
2025-08-02 18:11:14,515 - src.pipeline.hooks.preview_hook - INFO - _find_latest_model:297 - Selected latest model: /home/eqx/AutoTrainX/workspace/output/b09g13/model/b09g13_SX1_ec75f78f.safetensors
2025-08-02 18:11:14,515 - src.image_preview.preview_pipeline - INFO - generate_previews:70 - Generating 2 previews for b09g13 using SX1
2025-08-02 18:11:15,667 - src.image_preview.utils - INFO - ensure_comfyui_running:154 - ComfyUI Environment Diagnosis:
2025-08-02 18:11:15,667 - src.image_preview.utils - INFO - ensure_comfyui_running:155 -   ComfyUI path exists: True
2025-08-02 18:11:15,667 - src.image_preview.utils - INFO - ensure_comfyui_running:156 -   main.py exists: True
2025-08-02 18:11:15,667 - src.image_preview.utils - INFO - ensure_comfyui_running:157 -   Python: Python 3.12.3
2025-08-02 18:11:15,667 - src.image_preview.utils - INFO - ensure_comfyui_running:158 -   GPU available: True
2025-08-02 18:11:15,668 - src.image_preview.utils - INFO - ensure_comfyui_running:159 -   Port 8188 available: True
2025-08-02 18:11:15,668 - src.image_preview.utils - INFO - ensure_comfyui_running:177 - Starting ComfyUI from: /home/eqx/ComfyUI
2025-08-02 18:11:15,668 - src.image_preview.utils - INFO - ensure_comfyui_running:206 - Using ComfyUI virtual environment: /home/eqx/ComfyUI/venv
2025-08-02 18:11:15,669 - src.image_preview.utils - INFO - ensure_comfyui_running:218 - ComfyUI output will be logged to: /home/eqx/AutoTrainX/logs/ComfyUI_log/comfyui_20250802_181115.log
2025-08-02 18:11:15,669 - src.image_preview.utils - INFO - ensure_comfyui_running:221 - Executing command: /home/eqx/ComfyUI/venv/bin/python main.py --listen 127.0.0.1 --port 8188
2025-08-02 18:11:28,814 - src.image_preview.utils - INFO - ensure_comfyui_running:238 - ComfyUI started successfully on http://127.0.0.1:8188
2025-08-02 18:11:28,820 - src.image_preview.model_manager - INFO - _get_effective_preset:102 - Custom preset 'SX1' detected, using base preset 'SDXLCheckpoint' for model type detection
2025-08-02 18:11:28,820 - src.image_preview.model_manager - INFO - copy_model_to_comfyui:144 - Copying model to ComfyUI: /home/eqx/AutoTrainX/workspace/output/b09g13/model/b09g13_SX1_ec75f78f.safetensors -> /home/eqx/ComfyUI/models/checkpoints/b09g13_SX1_ec75f78f.safetensors
2025-08-02 18:11:34,873 - src.image_preview.workflow_handler - INFO - _get_base_preset:70 - Custom preset 'SX1' detected, using base preset 'SDXLCheckpoint' for workflow
2025-08-02 18:11:34,873 - src.image_preview.workflow_handler - INFO - load_workflow:120 - Loaded and validated workflow: SDXLCheckpoint.json for SX1
2025-08-02 18:11:34,873 - src.image_preview.preview_pipeline - INFO - generate_previews:118 - Generating preview 1/2
2025-08-02 18:11:34,874 - src.image_preview.workflow_customizer - INFO - customize_workflow:79 - Customizing workflow for SX1 - Preview 1
2025-08-02 18:11:34,877 - src.image_preview.workflow_customizer - INFO - _get_effective_preset:53 - Custom preset 'SX1' detected, using base preset 'SDXLCheckpoint' for customization
2025-08-02 18:11:34,877 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:201 - Updated CheckpointLoaderSimple: b09g13_SX1_ec75f78f.safetensors
2025-08-02 18:11:34,878 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:208 - Randomized seed in Seed Everywhere: 1625648690
2025-08-02 18:11:34,878 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:217 - Randomized seed in Load Prompt From File - EQX: 3916100417
2025-08-02 18:11:34,878 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:239 - Updated prompt file path: /home/eqx/AutoTrainX/ComfyUI_workflow_utils/txt/stand1.txt
2025-08-02 18:11:34,878 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:293 - Updated SaveImage_EQX filename: b09g13_SX1_01
2025-08-02 18:11:34,878 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:208 - Randomized seed in Seed Everywhere: 254998095
2025-08-02 18:11:34,878 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:280 - Updated output path: /home/eqx/AutoTrainX/workspace/output/b09g13/Preview
2025-08-02 18:11:34,884 - src.image_preview.comfyui_client - INFO - execute_workflow:80 - Submitted workflow with job ID: 98c3c02a-5472-4690-8f04-e4f65252cafc
2025-08-02 18:12:15,491 - src.image_preview.preview_pipeline - INFO - generate_previews:204 - Found generated image: /home/eqx/AutoTrainX/workspace/output/b09g13/Preview/b09g13_SX1_01_0001.png
2025-08-02 18:12:15,491 - src.image_preview.preview_pipeline - INFO - generate_previews:118 - Generating preview 2/2
2025-08-02 18:12:15,492 - src.image_preview.workflow_customizer - INFO - customize_workflow:79 - Customizing workflow for SX1 - Preview 2
2025-08-02 18:12:15,496 - src.image_preview.workflow_customizer - INFO - _get_effective_preset:53 - Custom preset 'SX1' detected, using base preset 'SDXLCheckpoint' for customization
2025-08-02 18:12:15,496 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:201 - Updated CheckpointLoaderSimple: b09g13_SX1_ec75f78f.safetensors
2025-08-02 18:12:15,496 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:208 - Randomized seed in Seed Everywhere: 4261535431
2025-08-02 18:12:15,496 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:217 - Randomized seed in Load Prompt From File - EQX: 727377208
2025-08-02 18:12:15,497 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:239 - Updated prompt file path: /home/eqx/AutoTrainX/ComfyUI_workflow_utils/txt/stand1.txt
2025-08-02 18:12:15,497 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:293 - Updated SaveImage_EQX filename: b09g13_SX1_02
2025-08-02 18:12:15,497 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:208 - Randomized seed in Seed Everywhere: 1460569662
2025-08-02 18:12:15,497 - src.image_preview.workflow_customizer - INFO - _customize_sdxl_checkpoint_workflow:280 - Updated output path: /home/eqx/AutoTrainX/workspace/output/b09g13/Preview
2025-08-02 18:12:15,499 - src.image_preview.comfyui_client - INFO - execute_workflow:80 - Submitted workflow with job ID: 792cd03b-75e3-4ddb-b6ea-0dacfaf3a4f9
2025-08-02 18:12:47,710 - src.image_preview.preview_pipeline - INFO - generate_previews:204 - Found generated image: /home/eqx/AutoTrainX/workspace/output/b09g13/Preview/b09g13_SX1_02_0001.png
2025-08-02 18:12:47,710 - src.image_preview.model_manager - INFO - remove_model_from_comfyui:157 - Removing temporary model: /home/eqx/ComfyUI/models/checkpoints/b09g13_SX1_ec75f78f.safetensors
2025-08-02 18:12:48,292 - src.image_preview.preview_pipeline - INFO - generate_previews:250 - Shutting down ComfyUI after preview generation
2025-08-02 18:12:48,303 - src.image_preview.utils - INFO - shutdown_comfyui:420 - ComfyUI process killed successfully
2025-08-02 18:12:48,303 - src.pipeline.hooks.hook_manager - INFO - execute_hooks:83 - Hook ImagePreviewHook completed successfully
2025-08-02 18:12:48,303 - src.pipeline.hooks.file_move_hook - INFO - should_execute:76 - File move hook will execute for mode: single, dataset: b09g13
2025-08-02 18:12:48,303 - src.pipeline.hooks.hook_manager - INFO - execute_hooks:74 - Executing hook: FileMoveHook
2025-08-02 18:12:48,303 - src.pipeline.hooks.file_move_hook - INFO - execute:95 - FileMoveHook execute - mode: single
2025-08-02 18:12:48,303 - src.pipeline.hooks.file_move_hook - INFO - execute:96 - FileMoveHook execute - context keys: ['success', 'training_success', 'dataset_name', 'preset', 'model_type', 'preview_count', 'job_id', 'mode', 'config_path', 'preview_enabled']
2025-08-02 18:12:48,304 - src.pipeline.hooks.file_move_hook - INFO - move_training_files:448 - Moving model: /home/eqx/AutoTrainX/workspace/output/b09g13/model/b09g13_SX1_ec75f78f.safetensors -> /home/eqx/custom/b09g13_SX1_ec75f78f/b09g13_SX1_ec75f78f.safetensors
2025-08-02 18:12:48,304 - src.pipeline.hooks.file_move_hook - INFO - move_training_files:474 - Moving preview dir: /home/eqx/AutoTrainX/workspace/output/b09g13/Preview -> /home/eqx/custom/b09g13_SX1_ec75f78f/Preview
2025-08-02 18:12:48,305 - src.pipeline.hooks.hook_manager - INFO - execute_hooks:83 - Hook FileMoveHook completed successfully
